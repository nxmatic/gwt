diff --git a/common.ant.xml b/common.ant.xml
index 36a56b488..b61cd36e9 100755
--- a/common.ant.xml
+++ b/common.ant.xml
@@ -310,13 +310,19 @@
 
   <macrodef name="gwt.getgitinfo" description="Identifies the GIT info of a workspace">
     <sequential>
-      <exec executable="git" searchpath="true" outputproperty="gwt.gitrev">
+      <condition property="gwt.gitrev" value="${env.GIT_REV}" else="unknown">
+        <and>
+          <isset property="env.GIT_REV"/>
+          <not><equals arg1="${env.GIT_REV}" arg2=""/></not>
+        </and>
+      </condition>
+      <exec executable="git" searchpath="true" outputproperty="git.output" resultproperty="git.result" failifexecutionfails="false">
         <arg line="rev-parse --short HEAD"/>
       </exec>
-      <!-- Generally, filtering requires a sentinel file so that changes to git rev will
-         be noticed as invalidating the previously-generated filter output.  This property
-         names where such a sentinel lives; it is tested with <available/> and created
-         with <touch/> -->
+      <condition property="gwt.gitrev" value="${git.output}" else="${gwt.gitrev}">
+        <equals arg1="${git.result}" arg2="0"/>
+      </condition>
+      <echo message="Using Git revision: ${gwt.gitrev}"/>
       <mkdir dir="${project.build}/sentinels"/>
       <property name="filter.sentinel"
                 location="${project.build}/sentinels/gwt-${gwt.version}-git-${gwt.gitrev}"/>
